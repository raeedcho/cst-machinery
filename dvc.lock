schema: '2.0'
stages:
  extract_dwight@2025-01-07-reward-type_medium_cst-rtt-dco:
    cmd: python scripts/extract_trial_frame.py --path 
      data/dwight/2025-01-07/Dwight_2025-01-07_reward-type_medium_cst-rtt-dco_sorted.mat
      --out 
      results/dwight/2025-01-07/Dwight_2025-01-07_reward-type_medium_cst-rtt-dco_tf.pkl
      --block reward-type_medium_cst-rtt-dco --bin_size 10ms
    deps:
    - path: 
        data/dwight/2025-01-07/Dwight_2025-01-07_reward-type_medium_cst-rtt-dco_sorted.mat
      hash: md5
      md5: ff17229ed7166de03a6d8a95c5d43f70
      size: 357282032
    params:
      params.yaml:
        extract.bin_size: 10ms
    outs:
    - path: 
        results/dwight/2025-01-07/Dwight_2025-01-07_reward-type_medium_cst-rtt-dco_tf.pkl
      hash: md5
      md5: d46b5e190d5729b5a8b27058f91e1d19
      size: 57849219
  extract_dwight@2025-01-07-reward-type_medium-large_cst-rtt-dco:
    cmd: python scripts/extract_trial_frame.py --path 
      data/dwight/2025-01-07/Dwight_2025-01-07_reward-type_medium-large_cst-rtt-dco_sorted.mat
      --out 
      results/dwight/2025-01-07/Dwight_2025-01-07_reward-type_medium-large_cst-rtt-dco_tf.pkl
      --block reward-type_medium-large_cst-rtt-dco --bin_size 10ms
    deps:
    - path: 
        data/dwight/2025-01-07/Dwight_2025-01-07_reward-type_medium-large_cst-rtt-dco_sorted.mat
      hash: md5
      md5: 6ebab48109d40b8a66355172b0826861
      size: 1501593328
      isexec: true
    params:
      params.yaml:
        extract.bin_size: 10ms
    outs:
    - path: 
        results/dwight/2025-01-07/Dwight_2025-01-07_reward-type_medium-large_cst-rtt-dco_tf.pkl
      hash: md5
      md5: 042d6dbbc9335a7aa26e61d5e549c63d
      size: 170816964
  extract_dwight@2025-01-07-reward-type-choice:
    cmd: python scripts/extract_trial_frame.py data/dwight/2025-01-07/Dwight_2025-01-07_reward-type-choice_sorted.mat
      --out 
      results/trialframe/Dwight/2025-01-07/blocks/Dwight_2025-01-07_reward-type-choice_tf.parquet
      --block reward-type-choice --bin_size 10ms --min_firing_rate 0.1 --max_spike_coincidence
      0.2 --verbose
    deps:
    - path: /Users/raeed/codebase/0-projects/smile-extraction/smile_extract
      hash: md5
      md5: 69bb9c5a3f2a4b86ac90ce3a43c0587d.dir
      size: 77373
      nfiles: 27
    - path: data/dwight/2025-01-07/Dwight_2025-01-07_reward-type-choice_sorted.mat
      hash: md5
      md5: bc01f906a700ba664a6a1abb43479976
      size: 532558654
    - path: scripts/extract_trial_frame.py
      hash: md5
      md5: 6bebc14750ea17483cb65cdc9762a90b
      size: 2106
    params:
      params.yaml:
        extract:
          bin_size: 10ms
          min_firing_rate: 0.1
          max_spike_coincidence: 0.2
          verbose: true
    outs:
    - path: 
        results/trialframe/Dwight/2025-01-07/blocks/Dwight_2025-01-07_reward-type-choice_tf.log
      hash: md5
      md5: d537c7a318f11bc02412cd1bb9f2ca60
      size: 525
    - path: 
        results/trialframe/Dwight/2025-01-07/blocks/Dwight_2025-01-07_reward-type-choice_tf.parquet
      hash: md5
      md5: cc2e3c3fe0c10193794f29953a254246
      size: 3893531
  extract_dwight@2025-01-07-reward-type-medium-cst-rtt-dco:
    cmd: python scripts/extract_trial_frame.py 
      data/dwight/2025-01-07/Dwight_2025-01-07_reward-type-medium-cst-rtt-dco_sorted.mat
      --out 
      results/trialframe/Dwight/2025-01-07/blocks/Dwight_2025-01-07_reward-type-medium-cst-rtt-dco_tf.parquet
      --block reward-type-medium-cst-rtt-dco --bin_size 10ms --min_firing_rate 0.1
      --max_spike_coincidence 0.2 --verbose
    deps:
    - path: /Users/raeed/codebase/0-projects/smile-extraction/smile_extract
      hash: md5
      md5: 69bb9c5a3f2a4b86ac90ce3a43c0587d.dir
      size: 77373
      nfiles: 27
    - path: 
        data/dwight/2025-01-07/Dwight_2025-01-07_reward-type-medium-cst-rtt-dco_sorted.mat
      hash: md5
      md5: ff17229ed7166de03a6d8a95c5d43f70
      size: 357282032
    - path: scripts/extract_trial_frame.py
      hash: md5
      md5: 6bebc14750ea17483cb65cdc9762a90b
      size: 2106
    params:
      params.yaml:
        extract:
          bin_size: 10ms
          min_firing_rate: 0.1
          max_spike_coincidence: 0.2
          verbose: true
    outs:
    - path: 
        results/trialframe/Dwight/2025-01-07/blocks/Dwight_2025-01-07_reward-type-medium-cst-rtt-dco_tf.log
      hash: md5
      md5: 45721d7098930a2f3375acdafd524e65
      size: 561
    - path: 
        results/trialframe/Dwight/2025-01-07/blocks/Dwight_2025-01-07_reward-type-medium-cst-rtt-dco_tf.parquet
      hash: md5
      md5: 2141b8c591d2301f6a3c1803142e3bbe
      size: 2655531
  extract_dwight@2025-01-07-reward-type-medium-large-cst-rtt-dco:
    cmd: python scripts/extract_trial_frame.py 
      data/dwight/2025-01-07/Dwight_2025-01-07_reward-type-medium-large-cst-rtt-dco_sorted.mat
      --out 
      results/trialframe/Dwight/2025-01-07/blocks/Dwight_2025-01-07_reward-type-medium-large-cst-rtt-dco_tf.parquet
      --block reward-type-medium-large-cst-rtt-dco --bin_size 10ms --min_firing_rate
      0.1 --max_spike_coincidence 0.2 --verbose
    deps:
    - path: /Users/raeed/codebase/0-projects/smile-extraction/smile_extract
      hash: md5
      md5: 69bb9c5a3f2a4b86ac90ce3a43c0587d.dir
      size: 77373
      nfiles: 27
    - path: 
        data/dwight/2025-01-07/Dwight_2025-01-07_reward-type-medium-large-cst-rtt-dco_sorted.mat
      hash: md5
      md5: 6ebab48109d40b8a66355172b0826861
      size: 1501593328
    - path: scripts/extract_trial_frame.py
      hash: md5
      md5: 6bebc14750ea17483cb65cdc9762a90b
      size: 2106
    params:
      params.yaml:
        extract:
          bin_size: 10ms
          min_firing_rate: 0.1
          max_spike_coincidence: 0.2
          verbose: true
    outs:
    - path: 
        results/trialframe/Dwight/2025-01-07/blocks/Dwight_2025-01-07_reward-type-medium-large-cst-rtt-dco_tf.log
      hash: md5
      md5: 2440a30ddaa5fa5ade5baeea0ca4b6d8
      size: 579
    - path: 
        results/trialframe/Dwight/2025-01-07/blocks/Dwight_2025-01-07_reward-type-medium-large-cst-rtt-dco_tf.parquet
      hash: md5
      md5: eb65aecb4538de1963343c80dd9fb8f8
      size: 7640159
  combine_session@0:
    cmd: python scripts/combine_session.py results/trialframe/Dwight/2025-01-07/blocks/
      --out results/trialframe/Dwight/2025-01-07/Dwight_2025-01-07_tf.parquet --verbose
    deps:
    - path: results/trialframe/Dwight/2025-01-07/blocks/
      hash: md5
      md5: 0047f3a2ccdbaa3691c01e4ed6e53e63.dir
      size: 296042700
      nfiles: 10
    - path: scripts/combine_session.py
      hash: md5
      md5: 2bc503e71e3270bced1901917775c9a1
      size: 1431
    params:
      params.yaml:
        combine_session:
          verbose: true
    outs:
    - path: results/trialframe/Dwight/2025-01-07/Dwight_2025-01-07_tf.log
      hash: md5
      md5: 7501968053820c4bbae575b944b8de75
      size: 314
    - path: results/trialframe/Dwight/2025-01-07/Dwight_2025-01-07_tf.parquet
      hash: md5
      md5: 1f28c14e9bae63f0145ecb8041457e67
      size: 13165163
  context_axis@0:
    cmd: python scripts/get_context_axis.py results/trialframe/Dwight/2025-01-07/Dwight_2025-01-07_tf.parquet
      --out results/context_axis/Dwight/2025-01-07/Dwight_2025-01-07_context_axis.svg
      --verbose
    deps:
    - path: results/trialframe/Dwight/2025-01-07/Dwight_2025-01-07_tf.parquet
      hash: md5
      md5: 1f28c14e9bae63f0145ecb8041457e67
      size: 13165163
    - path: scripts/get_context_axis.py
      hash: md5
      md5: a6b6043391de67dfe1bcaa3077f5956e
      size: 3737
    params:
      params.yaml:
        context_axis:
          verbose: true
    outs:
    - path: results/context_axis/Dwight/2025-01-07/Dwight_2025-01-07_context_axis.log
      hash: md5
      md5: 8824ef855eb0027c73d7dd205f2d1da4
      size: 98681
    - path: results/context_axis/Dwight/2025-01-07/Dwight_2025-01-07_context_axis.svg
      hash: md5
      md5: cbcf7fab9579606d87f04d15c4714a95
      size: 1282937
